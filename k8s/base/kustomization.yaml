# Kustomize base configuration
# Used by ArgoCD for GitOps deployments
apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

metadata:
  name: vmshift-base

# Common labels for all resources
labels:
  - pairs:
      app.kubernetes.io/name: vmshift
      app.kubernetes.io/managed-by: argocd

# Resources to include
resources:
  - namespace-secrets.yaml
  - redis-deployment.yaml
  - api-deployment.yaml
  - celery-deployment.yaml
  - hpa.yaml

# ConfigMap generator (for non-sensitive config)
configMapGenerator:
  - name: vmshift-config
    literals:
      - APP_NAME=VMShift Demo
      - DEBUG=false
      - LOG_LEVEL=INFO

# Image tags (override in overlays)
images:
  - name: ghcr.io/ilearn-code/vmshift-api
    newTag: latest
  - name: ghcr.io/ilearn-code/vmshift-celery
    newTag: latest
